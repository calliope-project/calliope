import:
  - plan.yaml

constraints:
  total_system_cost_max:
    description: >
      Limit total system cost. Conceived for use in SPORES mode to apply a maximum
      relaxation to the system cost compared to the least-cost feasible option.
    foreach: [costs]
    where: spores_cost_max
    equations:
      - expression: sum(cost, over=[nodes, techs]) <= spores_cost_max * (1 + spores_slack)

global_expressions:
  cost_spores:
    foreach: [nodes, techs, costs]
    where: "[spores_score] in costs AND cost_flow_cap"
    equations:
      - expression: cost_flow_cap
