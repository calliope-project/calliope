model:
    name: Demand share decision constraint test model
    timeseries_data_path: 'timeseries_data'

run:
    mode: plan
    solver: cbc

techs:
    cheap_elec_supply:
        essentials:
            name: Cheap electricity supply
            parent: supply
            carrier: electricity
        constraints:
            lifetime: 25
            energy_cap_max: .inf
            resource: file=supply_simple.csv
        costs:
            monetary:
                interest_rate: 0.1
                energy_cap: 10
    expensive_elec_supply:
        essentials:
            name: Expensive electricity supply
            parent: supply
            carrier: electricity
        constraints:
            lifetime: 25
            energy_cap_max: .inf
        costs:
            monetary:
                interest_rate: 0.1
                energy_cap: 20
    normal_elec_supply:
        essentials:
            name: Normal electricity supply
            parent: supply
            carrier: electricity
        constraints:
            lifetime: 25
            energy_cap_max: .inf
        costs:
            monetary:
                interest_rate: 0.1
                energy_cap: 15
    electricity_demand:
        essentials:
            name: Electricity demand
            carrier: electricity
            parent: demand
        constraints:
            resource: file=demand_simple.csv

locations:
    0,1:
        techs: {cheap_elec_supply, expensive_elec_supply, normal_elec_supply, electricity_demand}

overrides:
    demand_share_per_timestep_decision_inf:
        group_constraints.demand_share_per_timestep_decision_inf_constraint:
            demand_share_per_timestep_decision:
                electricity: .inf
    demand_share_per_timestep_decision_simple:
        group_constraints.demand_share_per_timestep_decision_simple_constraint:
            demand_share_per_timestep_decision:
                electricity: 1.0
    demand_share_per_timestep_decision_not_one:
        group_constraints.demand_share_per_timestep_decision_not_one_constraint:
            techs: ["normal_elec_supply", "expensive_elec_supply"]
            demand_share_per_timestep_decision:
                electricity: 0.9
    demand_share_per_timestep_decision_per_location:
        group_constraints.demand_share_per_timestep_decision_loc0_constraint:
            locs: ["0"]
            demand_share_per_timestep_decision:
                electricity: 1.0
        group_constraints.demand_share_per_timestep_decision_loc1_constraint:
            locs: ["1"]
            demand_share_per_timestep_decision:
                electricity: 1.0
